<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Class: PlayerLoader</title>

	<link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

	<script src="./js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="class">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="./lib/player_loader_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/player_loader.rb">lib/player_loader.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			
			<div id="parent-class-section" class="section">
				<h3 class="section-header">Parent</h3>
				
				<p class="link">Object</p>
				
			</div>
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-i-check_method">#check_method</a></li>
					
					<li><a href="#method-i-load">#load</a></li>
					
					<li><a href="#method-i-require_player_file">#require_player_file</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="./README_rdoc.html">README.rdoc</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="./images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="./ConsoleRenderer.html">ConsoleRenderer</a></li>
				
					<li><a href="./DictionaryLoader.html">DictionaryLoader</a></li>
				
					<li><a href="./Hangman.html">Hangman</a></li>
				
					<li><a href="./HumanDemoPlayer.html">HumanDemoPlayer</a></li>
				
					<li><a href="./PlayerLoader.html">PlayerLoader</a></li>
				
					<li><a href="./StupidDemoPlayer.html">StupidDemoPlayer</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="class">PlayerLoader</h1>

		<div id="description">
			<p>
Responsible for loading the players and performing some check to ensure
they are valid
</p>

		</div>

		<!-- Constants -->
		

		<!-- Attributes -->
		
		<div id="attribute-method-details" class="method-section section">
			<h3 class="section-header">Attributes</h3>

			
			<div id="errors-attribute-method" class="method-detail">
				<a name="errors"></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">errors</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description">
				
				<p>
After loading, gives a list of errors (if any) for the players that it
tried to load
</p>
				
				</div>
			</div>
			
		</div>
		

		<!-- Methods -->
		
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="load-method" class="method-detail ">
				<a name="method-i-load"></a>

				<div class="method-heading">
				
					<span class="method-name">load</span><span
						class="method-args">(folder_path)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
For a given folder, load the player files. Check that each player has
implemented the correct methods and loads correctly. Returns an array of
player classes that the caller can instantiate when required.
</p>
					

					
					<div class="method-source-code"
						id="load-source">
<pre>
    <span class="ruby-comment cmt"># File lib/player_loader.rb, line 8</span>
 8:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load</span>(<span class="ruby-identifier">folder_path</span>)
 9:     <span class="ruby-identifier">players</span> = []
10:     <span class="ruby-ivar">@errors</span> = []
11:     
12:     <span class="ruby-constant">Dir</span>[<span class="ruby-node">&quot;#{folder_path}/*.rb&quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">player_file</span><span class="ruby-operator">|</span> 
13:       <span class="ruby-identifier">require_player_file</span> <span class="ruby-identifier">player_file</span>
14:     <span class="ruby-keyword kw">end</span>
15:     
16:     <span class="ruby-constant">Module</span>.<span class="ruby-identifier">constants</span>.<span class="ruby-identifier">select</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">constant_name</span><span class="ruby-operator">|</span>
17:       <span class="ruby-identifier">constant</span> = <span class="ruby-identifier">eval</span> <span class="ruby-identifier">constant_name</span>.<span class="ruby-identifier">to_s</span>
18:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">constant</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">constant</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Class</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">constant_name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-value str">&quot;Player&quot;</span>
19:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">check_method</span>(<span class="ruby-identifier">constant</span>, <span class="ruby-identifier">constant_name</span>, <span class="ruby-value str">'name'</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">check_method</span>(<span class="ruby-identifier">constant</span>, <span class="ruby-identifier">constant_name</span>, <span class="ruby-value str">'new_game'</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">check_method</span>(<span class="ruby-identifier">constant</span>, <span class="ruby-identifier">constant_name</span>, <span class="ruby-value str">'take_turn'</span>)  
20:            <span class="ruby-identifier">players</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">constant</span>
21:         <span class="ruby-keyword kw">end</span>
22:       <span class="ruby-keyword kw">end</span>
23:     <span class="ruby-keyword kw">end</span>
24:     
25:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">players</span>
26:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="private-instance-method-details" class="method-section section">
			<h3 class="section-header">Private Instance Methods</h3>

		
			<div id="check-method-method" class="method-detail ">
				<a name="method-i-check_method"></a>

				<div class="method-heading">
				
					<span class="method-name">check_method</span><span
						class="method-args">(constant, constant_name, method_name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
For the given player class, check that it implements the specified method.
If not log the error and return false. Otherwise return true.
</p>
					

					
					<div class="method-source-code"
						id="check-method-source">
<pre>
    <span class="ruby-comment cmt"># File lib/player_loader.rb, line 40</span>
40:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_method</span>(<span class="ruby-identifier">constant</span>, <span class="ruby-identifier">constant_name</span>, <span class="ruby-identifier">method_name</span>)
41:     <span class="ruby-identifier">instance</span> = <span class="ruby-identifier">constant</span>.<span class="ruby-identifier">new</span>
42:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">instance</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method_name</span>)
43:       <span class="ruby-ivar">@errors</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;Failed to load player '#{constant_name.to_s}' because it doesn't contain the method: #{method_name}&quot;</span>
44:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
45:     <span class="ruby-keyword kw">end</span>
46:     
47:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
48:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="require-player-file-method" class="method-detail ">
				<a name="method-i-require_player_file"></a>

				<div class="method-heading">
				
					<span class="method-name">require_player_file</span><span
						class="method-args">(player_file)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Requires the specified file and logs an error if there is a syntax error
raised
</p>
					

					
					<div class="method-source-code"
						id="require-player-file-source">
<pre>
    <span class="ruby-comment cmt"># File lib/player_loader.rb, line 31</span>
31:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">require_player_file</span>(<span class="ruby-identifier">player_file</span>)
32:     <span class="ruby-keyword kw">begin</span>
33:       <span class="ruby-identifier">require</span> <span class="ruby-node">&quot;./#{player_file}&quot;</span>
34:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SyntaxError</span>
35:       <span class="ruby-ivar">@errors</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;Failed to load player '#{player_file}' due to a syntax error: #{$!}&quot;</span>
36:     <span class="ruby-keyword kw">end</span>
37:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

